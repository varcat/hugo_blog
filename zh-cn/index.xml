<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>varcat</title><link>https://varcat.github.io/hugo_blog/zh-cn/</link><description>Recent content on varcat</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 12 Jan 2026 22:00:00 +0800</lastBuildDate><atom:link href="https://varcat.github.io/hugo_blog/zh-cn/index.xml" rel="self" type="application/rss+xml"/><item><title>frp å†…ç½‘ç©¿é€</title><link>https://varcat.github.io/hugo_blog/zh-cn/p/frp/</link><pubDate>Mon, 12 Jan 2026 22:00:00 +0800</pubDate><guid>https://varcat.github.io/hugo_blog/zh-cn/p/frp/</guid><description>&lt;h2 id="å‰è¨€"&gt;å‰è¨€
&lt;/h2&gt;&lt;p&gt;ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œæˆ‘å®¶é‡ŒæŠ˜è…¾äº†ä¸€å°æ€§èƒ½å¼ºåŠ²çš„ NASï¼Œä½†å—é™äºå†…ç½‘ç¯å¢ƒï¼Œå‡ºé—¨å°±æˆäº†â€œæ–­çº¿é±¼â€ã€‚è™½ç„¶æ‰‹é‡Œæœ‰ä¸€å°äº‘æœåŠ¡å™¨ï¼Œä½†é‚£ç‚¹å¯æ€œçš„ CPU å’Œå†…å­˜èµ„æºï¼Œè·‘ä¸ªå¤§å‹æœåŠ¡å®åœ¨åƒåŠ›ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½çš„æ–¹æ¡ˆè«è¿‡äºï¼šäº‘æœåŠ¡å™¨åªåšâ€œè·¯ç‰Œâ€ï¼ŒæŠŠæµé‡è½¬å‘åˆ°å®¶é‡Œçš„â€œæ€§èƒ½çŒ›å…½â€ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¯¹æ¯”äº†å¤šç§å·¥å…·åï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº† frpã€‚å®ƒè½»é‡ã€ç¨³å®šä¸”é…ç½®æç®€ï¼Œå®Œç¾è§£å†³äº†æˆ‘çš„å†…ç½‘ç©¿é€éœ€æ±‚ã€‚ä»Šå¤©å°±æŠŠè¿™å¥—â€œäº‘ç«¯ä¸­è½¬ + æœ¬åœ°é«˜é…â€çš„æ­å»ºæ–¹æ¡ˆåˆ†äº«ç»™å¤§å®¶ã€‚&lt;/p&gt;
&lt;h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-frp"&gt;ä¸ºä»€ä¹ˆé€‰æ‹© frpï¼Ÿ
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨äººç¾¤&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;DDNS (åŸŸåè§£æ)&lt;/td&gt;
&lt;td&gt;åŸç”Ÿé€Ÿåº¦å¿«ï¼Œæ— ä¸­è½¬å»¶è¿Ÿ&lt;/td&gt;
&lt;td&gt;å¿…é¡»æœ‰å…¬ç½‘ IPï¼Œå—é™äºè¿è¥å•†&lt;/td&gt;
&lt;td&gt;æœ‰å…¬ç½‘ IP çš„æŠ€æœ¯å¤§ç‰›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å•†ä¸šå·¥å…· (å¦‚èŠ±ç”Ÿå£³)&lt;/td&gt;
&lt;td&gt;å‚»ç“œå¼æ“ä½œï¼Œæ— éœ€æœåŠ¡å™¨&lt;/td&gt;
&lt;td&gt;å…è´¹ç‰ˆå¸¦å®½æä½ã€é™åˆ¶æµé‡ã€ä¸å®‰å…¨&lt;/td&gt;
&lt;td&gt;é›¶åŸºç¡€å°ç™½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VPN (å¦‚ Tailscale)&lt;/td&gt;
&lt;td&gt;å®‰å…¨æ€§æé«˜ï¼Œæ— éœ€ä¸­è½¬æœº&lt;/td&gt;
&lt;td&gt;éœ€å®‰è£…å®¢æˆ·ç«¯ï¼Œéš¾å®ç°å…¬ç½‘ç›´æ¥è®¿é—®&lt;/td&gt;
&lt;td&gt;çº¯ç§äººè¿œç¨‹åŠå…¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;frp (è‡ªä¸»æ­å»º)&lt;/td&gt;
&lt;td&gt;æ”¯æŒå…¨åè®®ã€é«˜åº¦è‡ªå®šä¹‰ã€ç¨³å®šé«˜æ•ˆ&lt;/td&gt;
&lt;td&gt;éœ€å‡†å¤‡ä¸€å°å…¬ç½‘ VPS&lt;/td&gt;
&lt;td&gt;è¿½æ±‚æè‡´ä½“éªŒçš„ç©å®¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="frp-å·¥ä½œåŸç†ç®€æ"&gt;frp å·¥ä½œåŸç†ç®€æ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è§’è‰²åˆ†é…ï¼š
&lt;ul&gt;
&lt;li&gt;frps (Server)ï¼š éƒ¨ç½²åœ¨å…¬ç½‘æœåŠ¡å™¨ï¼Œè´Ÿè´£ç›‘å¬å’Œè½¬å‘ã€‚&lt;/li&gt;
&lt;li&gt;frpc (Client)ï¼š éƒ¨ç½²åœ¨å†…ç½‘æœºå™¨ï¼Œè´Ÿè´£å‘èµ·è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æµé‡èµ°å‘ï¼š ç”¨æˆ·è¯·æ±‚ -&amp;gt; å…¬ç½‘æœåŠ¡å™¨ (frps) -&amp;gt; éš§é“ -&amp;gt; å†…ç½‘è®¾å¤‡ (frpc) -&amp;gt; æœ¬åœ°æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å‡†å¤‡å·¥ä½œ"&gt;å‡†å¤‡å·¥ä½œ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ç¡¬ä»¶ï¼š ä¸€å°å¸¦å…¬ç½‘ IP çš„ VPSï¼ˆäº‘æœåŠ¡å™¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è½¯ä»¶ï¼š frp &lt;a class="link" href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener"
&gt;GitHub Release&lt;/a&gt; ä¸‹è½½å¯¹åº”æ¶æ„çš„åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;ç¯å¢ƒï¼š ç¡®è®¤æœåŠ¡å™¨é˜²ç«å¢™å·²æ”¾è¡Œå¯¹åº”ç«¯å£ï¼ˆå¦‚ 7000, 80/443 ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å®æˆ˜é…ç½®æ­¥éª¤"&gt;å®æˆ˜é…ç½®æ­¥éª¤
&lt;/h2&gt;&lt;h3 id="æœåŠ¡ç«¯é…ç½®-frpstoml"&gt;æœåŠ¡ç«¯é…ç½® (frps.toml)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®¾ç½®ç»‘å®šç«¯å£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰å…¨åŠ å›ºï¼š è®¾ç½® auth.tokenï¼ˆé˜²æ­¢åˆ«äººè¹­ä½ çš„æœåŠ¡å™¨ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;bindPort&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7000&lt;/span&gt; &lt;span class="c"&gt;# é»˜è®¤ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;auth&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;token&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;your-secure-token&amp;#34;&lt;/span&gt; &lt;span class="c"&gt;# è‡ªå®šä¹‰tokenï¼Œå»ºè®®è®¾ç½®ä¸ºå¤æ‚å­—ç¬¦ä¸²&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;transport&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tcpMuxKeepaliveInterval&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="c"&gt;# tcp mux çš„å¿ƒè·³æ£€æŸ¥é—´éš”æ—¶é—´ï¼Œå•ä½ç§’&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# ç«¯å£é™åˆ¶ï¼ˆå¯é€‰ï¼Œæå‡å®‰å…¨æ€§ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;allowPorts&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;start&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;end&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;100010&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="c"&gt;# å…è®¸ 10000-100010 ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;single&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3306&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="c"&gt;# å…è®¸ 3306 ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="å®¢æˆ·ç«¯é…ç½®-frpctoml"&gt;å®¢æˆ·ç«¯é…ç½® (frpc.toml)
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# åŸºæœ¬é…ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;serverAddr&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span class="c"&gt;# å…¬ç½‘æœåŠ¡å™¨ IP æˆ–åŸŸå&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;serverPort&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7000&lt;/span&gt; &lt;span class="c"&gt;# å…¬ç½‘æœåŠ¡å™¨ç«¯å£ï¼Œéœ€ä¸ bindPort ä¸€è‡´&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;auth&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;token&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;your-secure-token&amp;#34;&lt;/span&gt; &lt;span class="c"&gt;# ä¸æœåŠ¡ç«¯é…ç½®ä¸€è‡´&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# åŸºç¡€ä¼ è¾“ä¼˜åŒ–&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;transport&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tcpMux&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;transport&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tcpMuxKeepaliveInterval&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt; &lt;span class="c"&gt;# tcp mux çš„å¿ƒè·³æ£€æŸ¥é—´éš”æ—¶é—´ï¼Œå•ä½ç§’&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# tcp ä¼ è¾“&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="nx"&gt;proxies&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;name&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;ssh&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;type&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;localPort&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;remotePort&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;8001&lt;/span&gt; &lt;span class="c"&gt;# ssh -p 8001 user@serverAddr&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="å¸¸è§é—®é¢˜æ’æŸ¥-faq"&gt;å¸¸è§é—®é¢˜æ’æŸ¥ (FAQ)
&lt;/h2&gt;&lt;h3 id="è¿æ¥è¶…æ—¶-timeout"&gt;è¿æ¥è¶…æ—¶ (Timeout)
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç°è±¡&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å¯åŠ¨æ—¶æç¤º &lt;code&gt;login to server failed: dial tcp x.x.x.x:7000: i/o timeout&lt;/code&gt;ã€‚
&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡å™¨é˜²ç«å¢™æœªæ”¾è¡Œ &lt;code&gt;bindPort&lt;/code&gt; (é»˜è®¤ 7000)ã€‚&lt;/li&gt;
&lt;li&gt;äº‘æœåŠ¡å•†çš„å®‰å…¨ç»„æœªå¼€æ”¾å¯¹åº”ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ IP åœ°å€å¡«å†™é”™è¯¯ã€‚
&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™è®¾ç½® (å¦‚ &lt;code&gt;ufw&lt;/code&gt;, &lt;code&gt;iptables&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;ç™»å½•äº‘æœåŠ¡å•†æ§åˆ¶å°ï¼Œæ£€æŸ¥å®‰å…¨ç»„è§„åˆ™ï¼Œç¡®ä¿ TCP 7000 ç«¯å£å·²æ”¾è¡Œã€‚&lt;/li&gt;
&lt;li&gt;ç¡®è®¤å®¢æˆ·ç«¯é…ç½®ä¸­çš„ &lt;code&gt;serverAddr&lt;/code&gt; æ˜¯å¦æ­£ç¡®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è®¤è¯å¤±è´¥-authorization-failed"&gt;è®¤è¯å¤±è´¥ (Authorization Failed)
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç°è±¡&lt;/strong&gt;ï¼šæç¤º &lt;code&gt;login to server failed: authorization failed&lt;/code&gt;ã€‚
&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ &lt;code&gt;auth.token&lt;/code&gt; ä¸ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;æ—¶é—´ä¸åŒæ­¥ (frp å¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶é—´å·®æœ‰è¦æ±‚ï¼Œé»˜è®¤å…è®¸åå·® 15 åˆ†é’Ÿ)ã€‚
&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;li&gt;ç¡®ä¿ &lt;code&gt;frps.toml&lt;/code&gt; å’Œ &lt;code&gt;frpc.toml&lt;/code&gt; ä¸­çš„ &lt;code&gt;auth.token&lt;/code&gt; å®Œå…¨ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„ç³»ç»Ÿæ—¶é—´ï¼Œå¿…è¦æ—¶è¿›è¡Œæ—¶é—´åŒæ­¥ (NTP)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è¿æ¥è¢«æ‹’ç»-connection-refused"&gt;è¿æ¥è¢«æ‹’ç» (Connection Refused)
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç°è±¡&lt;/strong&gt;ï¼šæç¤º &lt;code&gt;dial tcp x.x.x.x:7000: connect: connection refused&lt;/code&gt;ã€‚
&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç«¯ (frps) æœªå¯åŠ¨æˆ–å·²åœæ­¢è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯ç›‘å¬ç«¯å£ä¸æ˜¯ 7000ã€‚
&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;li&gt;åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ &lt;code&gt;ps aux | grep frps&lt;/code&gt; æ£€æŸ¥è¿›ç¨‹æ˜¯å¦å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥æœåŠ¡ç«¯é…ç½®æ–‡ä»¶ &lt;code&gt;frps.toml&lt;/code&gt; ä¸­çš„ &lt;code&gt;bindPort&lt;/code&gt; è®¾ç½®ï¼Œç¡®ä¿ä¸å®¢æˆ·ç«¯ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç«¯å£å·²è¢«å ç”¨-port-already-in-use"&gt;ç«¯å£å·²è¢«å ç”¨ (Port Already In Use)
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç°è±¡&lt;/strong&gt;ï¼šå¯åŠ¨æ—¶æç¤º &lt;code&gt;port already in use&lt;/code&gt;ã€‚
&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡å®šçš„ç«¯å£ (å¦‚ 7000 æˆ–è¿œç¨‹æ˜ å°„ç«¯å£) å·²ç»è¢«å…¶ä»–ç¨‹åºå ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;frp è¿›ç¨‹é‡å¤å¯åŠ¨ã€‚
&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;netstat -tunlp | grep &amp;lt;ç«¯å£å·&amp;gt;&lt;/code&gt; æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£å·ï¼Œæˆ–ç»“æŸå ç”¨ç«¯å£çš„è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ç»“è¯­"&gt;ç»“è¯­
&lt;/h2&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬æˆåŠŸæ‰“é€šäº†å…¬ç½‘ä¸å†…ç½‘çš„é˜»éš”ï¼Œæ— è®ºæ˜¯è¿œç¨‹ç®¡ç† NASã€è®¿é—®å†…éƒ¨ Web æœåŠ¡ï¼Œè¿˜æ˜¯è°ƒè¯•æœ¬åœ°ä»£ç ï¼Œfrp éƒ½èƒ½æä¾›ç¨³å®šé«˜æ•ˆçš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”äºå…¶ä»–æ–¹æ¡ˆï¼Œfrp è™½ç„¶æœ‰ä¸€å®šçš„é…ç½®é—¨æ§›ï¼Œä½†å…¶å¸¦æ¥çš„çµæ´»æ€§å’Œé«˜æ€§èƒ½ä½“éªŒæ˜¯æ— å¯æ¯”æ‹Ÿçš„ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å¿«é€Ÿä¸Šæ‰‹ï¼Œæ­å»ºå±äºè‡ªå·±çš„å†…ç½‘ç©¿é€æœåŠ¡ï¼Œå°½æƒ…é‡Šæ”¾æœ¬åœ°è®¾å¤‡çš„å¼ºå¤§æ½œèƒ½ï¼&lt;/p&gt;</description></item><item><title>Linux æœåŠ¡å™¨å®‰å…¨åŠ å›ºæŒ‡å—ï¼šä»è¢«æ‰«æåˆ°ç¡ä¸ªå®‰ç¨³è§‰</title><link>https://varcat.github.io/hugo_blog/zh-cn/p/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA%E6%8C%87%E5%8D%97%E4%BB%8E%E8%A2%AB%E6%89%AB%E6%8F%8F%E5%88%B0%E7%9D%A1%E4%B8%AA%E5%AE%89%E7%A8%B3%E8%A7%89/</link><pubDate>Wed, 12 Nov 2025 19:34:00 +0800</pubDate><guid>https://varcat.github.io/hugo_blog/zh-cn/p/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA%E6%8C%87%E5%8D%97%E4%BB%8E%E8%A2%AB%E6%89%AB%E6%8F%8F%E5%88%B0%E7%9D%A1%E4%B8%AA%E5%AE%89%E7%A8%B3%E8%A7%89/</guid><description>&lt;h2 id="å‰è¨€"&gt;å‰è¨€
&lt;/h2&gt;&lt;p&gt;æˆ‘æ‰‹å¤´è¿™å°é˜¿é‡Œäº‘ ECS å®ä¾‹å¹³æ—¶ä¸»è¦ç”¨äºæ‰˜ç®¡åšå®¢å’Œè¿è¡Œ Docker æœåŠ¡ï¼Œæ­¤å‰å¹¶æœªåœ¨å®‰å…¨é…ç½®ä¸ŠæŠ•å…¥å¤ªå¤šç²¾åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;ç›´åˆ°æœ€è¿‘å¶ç„¶æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ—¶ï¼Œæ‰å‘ç° &lt;code&gt;/var/log/secure&lt;/code&gt; ä¸­å……æ–¥ç€å¯†å¯†éº»éº»çš„ &lt;code&gt;Failed password for root&lt;/code&gt; è®°å½•ã€‚ç»æº¯æºåˆ†æï¼Œè¿™äº›æ¶æ„ç™»å½•å°è¯•æ¥è‡ªå…¨çƒå„åœ°ã€‚é¢å¯¹è¿™æ•°ä¸‡æ¡æš´ç ´è®°å½•ï¼Œæˆ‘ä¸ç¦å¯¹æœåŠ¡å™¨çš„å¤„å¢ƒæ„Ÿåˆ°æ‹…å¿§â€”â€”æš´éœ²åœ¨å…¬ç½‘ç¯å¢ƒä¸‹çš„æœåŠ¡å™¨ï¼Œå®é™…ä¸Šæ­£æ—¶åˆ»ç»å—ç€å„ç±»è‡ªåŠ¨åŒ–è„šæœ¬çš„æ— å·®åˆ«æ‰«æä¸æ”»å‡»ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡æˆ‘è®¾ç½®äº†é«˜å¼ºåº¦çš„å¤æ‚å¯†ç ï¼Œä½†è¿™ç§è¢«æŒç»­ç›¯ä¸Šçš„æ½œåœ¨é£é™©å§‹ç»ˆä»¤äººä¸å®‰ã€‚ä¸€æ—¦é˜²å¾¡è¢«çªç ´ï¼ŒæœåŠ¡å™¨ä¸Šçš„æ•°æ®å®‰å…¨å°†æ— ä»è°ˆèµ·ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ç‰¹æ„æŠ½å‡ºæ—¶é—´å¯¹æœåŠ¡å™¨è¿›è¡Œäº†å…¨é¢çš„å®‰å…¨åŠ å›ºã€‚æœ¬æ–‡å°†è¯¦ç»†è®°å½•è¿™ä¸€æ•´æ”¹è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½ä¸ºåŒæ ·è¿è¡Œç€å…¬ç½‘æœåŠ¡å™¨çš„æœ‹å‹ä»¬æä¾›ä¸€ä»½å®ç”¨çš„å®‰å…¨å‚è€ƒã€‚&lt;/p&gt;
&lt;h2 id="ç¬¬ä¸€æ­¥çŸ¥å·±çŸ¥å½¼æ—¥å¿—æ’æŸ¥"&gt;ç¬¬ä¸€æ­¥ï¼šçŸ¥å·±çŸ¥å½¼ï¼Œæ—¥å¿—æ’æŸ¥
&lt;/h2&gt;&lt;p&gt;åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹æƒ…å†µåˆ°åº•æœ‰å¤šä¸¥å³»ã€‚&lt;/p&gt;
&lt;h3 id="æŸ¥æŸ¥æœ‰æ²¡æœ‰äººå·²ç»æ··è¿›æ¥äº†"&gt;æŸ¥æŸ¥æœ‰æ²¡æœ‰äººå·²ç»æ··è¿›æ¥äº†
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€å…³é”®çš„ï¼Œå…ˆç¡®è®¤â€œå¤„å¢ƒâ€ã€‚ä½¿ç”¨ &lt;code&gt;last&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹æœ€è¿‘æˆåŠŸçš„ç™»å½•è®°å½•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# æå–æ‰€æœ‰ç™»å½• IPï¼Œè¿‡æ»¤æ‰æœ¬åœ°ç™»å½•å’Œæ— æ•ˆå¹²æ‰°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;last -i &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $3}&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -E &lt;span class="s2"&gt;&amp;#34;([0-9]{1,3}\.){3}[0-9]{1,3}&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é‡ç‚¹çœ‹æœ‰æ²¡æœ‰é™Œç”Ÿçš„ IP åœ°å€ã€‚å¦‚æœæ˜¯è‡ªå·±ä¸è®¤è¯†çš„ IPï¼Œé‚£è¯´æ˜å·²ç»è¢«æ”»ç ´äº†ï¼Œè¿™æ—¶å€™é‡è£…ç³»ç»Ÿå¯èƒ½æ˜¯æœ€ç¨³å¦¥çš„é€‰æ‹©ã€‚å¥½åœ¨æˆ‘æŸ¥äº†ä¸€åœˆï¼Œé™¤äº†æˆ‘è‡ªå·±çš„ IPï¼Œæ²¡æœ‰åˆ«çš„æˆåŠŸè®°å½•ã€‚&lt;/p&gt;
&lt;h3 id="çœ‹çœ‹æ˜¯è°åœ¨æ•²é—¨"&gt;çœ‹çœ‹æ˜¯è°åœ¨æ•²é—¨
&lt;/h3&gt;&lt;p&gt;çœ‹çœ‹é‚£äº›å¤±è´¥çš„å°è¯•éƒ½æ¥è‡ªå“ªé‡Œã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç»Ÿè®¡ä¸€ä¸‹æ”»å‡»è€…çš„ IPï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# ç»Ÿè®¡æ‰€æœ‰å¤±è´¥ IP (æŒ‰æ¬¡æ•°æ’åº) entOS/RHEL ç³»é€šå¸¸åœ¨ /var/log/secure&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;grep &lt;span class="s2"&gt;&amp;#34;Failed password&amp;#34;&lt;/span&gt; /var/log/auth.log &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $(NF-3)}&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# ç»Ÿè®¡â€œä¸å­˜åœ¨çš„ç”¨æˆ·â€ç™»å½•å°è¯•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;grep &lt;span class="s2"&gt;&amp;#34;Invalid user&amp;#34;&lt;/span&gt; /var/log/auth.log &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $10}&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Debian 12 åŠä»¥å ç»Ÿè®¡å¯†ç é”™è¯¯ç™»å½•å¤±è´¥çš„ IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;journalctl &lt;span class="nv"&gt;_SYSTEMD_UNIT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ssh.service &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;#34;Failed password&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $(NF-3)}&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# ç»Ÿè®¡ä¸å­˜åœ¨ç”¨æˆ·ç™»å½•å°è¯•çš„ IP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;journalctl &lt;span class="nv"&gt;_SYSTEMD_UNIT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ssh.service &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;#34;Invalid user&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $10}&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è·‘å®Œå‘½ä»¤ï¼Œçœ‹ç€é‚£äº›æˆç™¾ä¸Šåƒçš„æ•°å­—ï¼Œä½ ä¼šæœ‰åŠ¨åŠ›çš„ã€‚&lt;/p&gt;
&lt;h2 id="ç¬¬äºŒæ­¥åŸºç¡€åŠ å›ºæŠŠé—¨ç„Šæ­»"&gt;ç¬¬äºŒæ­¥ï¼šåŸºç¡€åŠ å›ºï¼ŒæŠŠé—¨ç„Šæ­»
&lt;/h2&gt;&lt;p&gt;æ—¢ç„¶æ˜¯ SSH æš´åŠ›ç ´è§£ï¼Œé‚£æˆ‘ä»¬å°±åœ¨ SSH ä¸Šåšæ–‡ç« ã€‚&lt;/p&gt;
&lt;h3 id="ç¦ç”¨-root-ç›´æ¥ç™»å½•åˆ›å»ºæ™®é€šç”¨æˆ·"&gt;ç¦ç”¨ Root ç›´æ¥ç™»å½•ï¼Œåˆ›å»ºæ™®é€šç”¨æˆ·
&lt;/h3&gt;&lt;p&gt;ç›´æ¥ç”¨ root ç™»å½•æ˜¯å¤§å¿Œã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå¹¶èµ‹äºˆ sudo æƒé™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# åˆ›å»ºç”¨æˆ· user (æ¢æˆä½ è‡ªå·±çš„åå­—)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;useradd -m user
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;passwd user
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# èµ‹äºˆ sudo æƒé™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# CentOS/RHEL:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;usermod -aG wheel user
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Ubuntu/Debian:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;usermod -aG sudo user
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="é…ç½®-ssh-key-ç™»å½•ç¦ç”¨å¯†ç "&gt;é…ç½® SSH Key ç™»å½•ï¼Œç¦ç”¨å¯†ç 
&lt;/h3&gt;&lt;p&gt;å¯†ç å†å¤æ‚ä¹Ÿæœ‰è¢«æ’ç ´çš„å¯èƒ½ï¼Œå¯†é’¥å°±å®‰å…¨å¤šäº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½ çš„&lt;strong&gt;æœ¬åœ°ç”µè„‘&lt;/strong&gt;ï¼ˆä¸æ˜¯æœåŠ¡å™¨ï¼‰ä¸Šç”Ÿæˆå¯†é’¥å¯¹ï¼ˆå¦‚æœä½ è¿˜æ²¡æœ‰çš„è¯ï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh-keygen -t ed25519 -C &lt;span class="s2"&gt;&amp;#34;your_email@example.com&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åæŠŠå…¬é’¥ä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ³•ä¸€ï¼šä½¿ç”¨ ssh-copy-idï¼ˆæœ€æ¨èï¼Œæœ€çœå¿ƒï¼‰
è¿™æ˜¯æœ€æ ‡å‡†çš„å·¥å…·ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†ç›®å½•åˆ›å»ºã€æƒé™è®¾ç½®å’Œå†…å®¹è¿½åŠ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ssh-copy-id -i ~/.ssh/id_ed25519.pub user@&amp;lt;æœåŠ¡å™¨IP&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æ–¹æ³•äºŒï¼šä¸€è¡Œå‘½ä»¤æ‰‹åŠ¨å†™å…¥
å¦‚æœä½ æ— æ³•ç›´æ¥ä½¿ç”¨ ssh-copy-idï¼Œå¯ä»¥ç”¨ç®¡é“ç¬¦è¿œç¨‹å†™å…¥ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cat ~/.ssh/id_rsa.pub &lt;span class="p"&gt;|&lt;/span&gt; ssh user@your_vps_ip &lt;span class="s2"&gt;&amp;#34;mkdir -p ~/.ssh &amp;amp;&amp;amp; cat &amp;gt;&amp;gt; ~/.ssh/authorized_keys&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="ä¿®æ”¹-ssh-é…ç½®æ–‡ä»¶"&gt;ä¿®æ”¹ SSH é…ç½®æ–‡ä»¶
&lt;/h3&gt;&lt;p&gt;ç¼–è¾‘ &lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt;ï¼Œåšä»¥ä¸‹å‡ ä¸ªå…³é”®ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo vim /etc/ssh/sshd_config
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰¾åˆ°å¹¶ä¿®æ”¹ï¼ˆæˆ–æ·»åŠ ï¼‰ä»¥ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 1. ä¿®æ”¹é»˜è®¤ç«¯å£ï¼Œé¿å¼€ 99% çš„è„šæœ¬æ‰«æ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# é€‰ä¸€ä¸ª 1024-65535 ä¹‹é—´çš„ç«¯å£ï¼Œæ¯”å¦‚ 22222&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Port &lt;span class="m"&gt;22222&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 2. ç¦æ­¢ root ç™»å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;PermitRootLogin no
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 3. ç¦æ­¢å¯†ç ç™»å½•ï¼ˆå¿…é¡»ç¡®ä¿å¯†é’¥ç™»å½•å·²é…ç½®å¥½ï¼ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;PasswordAuthentication no
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 4. ä»…å…è®¸ç‰¹å®šç”¨æˆ·ç™»å½•ï¼ˆå¯é€‰ï¼Œæ›´ä¸¥æ ¼ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;AllowUsers user
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ”¹å®Œåï¼Œåˆ«æ€¥ç€é‡å¯ sshdï¼Œå…ˆå»&lt;strong&gt;é˜¿é‡Œäº‘æ§åˆ¶å°çš„å®‰å…¨ç»„&lt;/strong&gt;é‡Œï¼ŒæŠŠ TCP 22222 ç«¯å£æ”¾è¡Œï¼å¦åˆ™ä¸€é‡å¯ä½ å°±æŠŠè‡ªå·±å…³é—¨å¤–äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ”¾è¡Œç«¯å£åï¼Œé‡å¯ SSH æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl restart sshd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„:&lt;/strong&gt; å…ˆåˆ«å…³å½“å‰çš„sshçª—å£ï¼Œæ–°å¼€ä¸€ä¸ªsshæµ‹è¯•ä¸€ä¸‹èƒ½ä¸èƒ½ç”¨å¯†é’¥ç™»å½•æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶å€™ï¼Œç»å¤§å¤šæ•°çš„æ‰«æè„šæœ¬å› ä¸ºè¿ä¸ä¸Š 22 ç«¯å£ï¼Œå°±å·²ç»æ”¾å¼ƒä½ çš„æœåŠ¡å™¨äº†ã€‚&lt;/p&gt;
&lt;h2 id="ç¬¬ä¸‰æ­¥ä¸»åŠ¨é˜²å¾¡fail2ban"&gt;ç¬¬ä¸‰æ­¥ï¼šä¸»åŠ¨é˜²å¾¡ï¼ŒFail2Ban
&lt;/h2&gt;&lt;p&gt;ä¿®æ”¹ç«¯å£åªèƒ½é˜²ä½å‚»ç“œè„šæœ¬ï¼Œå¯¹äºå®šå‘æ‰«æè¿˜æ˜¯ä¸å¤Ÿã€‚è¿™æ—¶å€™å°±éœ€è¦ Fail2Ban ç™»åœºäº†ã€‚å®ƒçš„åŸç†å¾ˆç®€å•ï¼šæ£€æµ‹æ—¥å¿—ï¼Œå‘ç°æŸä¸ª IP åœ¨çŸ­æ—¶é—´å†…å¤šæ¬¡ç™»å½•å¤±è´¥ï¼Œå°±è°ƒç”¨é˜²ç«å¢™æŠŠå®ƒå°ç¦ä¸€æ®µæ—¶é—´ã€‚&lt;/p&gt;
&lt;h3 id="å®‰è£…-fail2ban"&gt;å®‰è£… Fail2Ban
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# CentOS/RHEL (éœ€è¦å…ˆå®‰è£… EPEL æº)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo yum install epel-release -y
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo yum install fail2ban -y
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Ubuntu/Debian&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt-get install fail2ban -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="é…ç½®-jail"&gt;é…ç½® Jail
&lt;/h3&gt;&lt;p&gt;Fail2Ban çš„é»˜è®¤é…ç½®æ–‡ä»¶åœ¨ &lt;code&gt;/etc/fail2ban/jail.conf&lt;/code&gt;ï¼Œä½†æˆ‘ä»¬ä¸è¦ç›´æ¥æ”¹å®ƒï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ª &lt;code&gt;jail.local&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo vim /etc/fail2ban/jail.local
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é‡ç‚¹ä¿®æ”¹ &lt;code&gt;[sshd]&lt;/code&gt; éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[sshd]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;enabled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# å¦‚æœä½ æ”¹äº†ç«¯å£ï¼Œè¿™é‡Œä¸€å®šè¦æ”¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;22222&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# è¿‡æ»¤è§„åˆ™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;filter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;sshd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# æ—¥å¿—è·¯å¾„&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;logpath&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/var/log/secure&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# æœ€å¤§å°è¯•æ¬¡æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;maxretry&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# å°ç¦æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œè¿™é‡Œè®¾ä¸ºä¸€å¤©&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;bantime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;86400&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# æ£€æµ‹æ—¶é—´çª—å£ï¼ˆç§’ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;findtime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;600&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="å¯åŠ¨å¹¶æŸ¥çœ‹çŠ¶æ€"&gt;å¯åŠ¨å¹¶æŸ¥çœ‹çŠ¶æ€
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; fail2ban
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl start fail2ban
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿‡ä¸€æ®µæ—¶é—´ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤çœ‹çœ‹æˆ˜æœï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo fail2ban-client status sshd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½ ä¼šçœ‹åˆ° &amp;ldquo;Currently banned&amp;rdquo; åé¢è·Ÿç€ä¸€ä¸² IPï¼Œçœ‹ç€å®ƒä»¬è¢«å…³è¿›å°é»‘å±‹ï¼Œå¿ƒé‡Œè«åæš—çˆ½ã€‚&lt;/p&gt;
&lt;h2 id="ç¬¬å››æ­¥æœ€åçš„é˜²çº¿é˜²ç«å¢™"&gt;ç¬¬å››æ­¥ï¼šæœ€åçš„é˜²çº¿ï¼Œé˜²ç«å¢™
&lt;/h2&gt;&lt;p&gt;è™½ç„¶é˜¿é‡Œäº‘æœ‰å®‰å…¨ç»„ï¼ˆSecurity Groupï¼‰ï¼Œä½†æˆ‘å»ºè®®ç³»ç»Ÿå†…éƒ¨çš„é˜²ç«å¢™ï¼ˆFirewalld æˆ– UFWï¼‰ä¹Ÿè¦å¼€èµ·æ¥ï¼ŒåŒé‡ä¿éšœã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ CentOS çš„ Firewalld ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# å¯åŠ¨é˜²ç«å¢™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl start firewalld
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; firewalld
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# æ”¾è¡Œæ–°çš„ SSH ç«¯å£&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo firewall-cmd --permanent --add-port&lt;span class="o"&gt;=&lt;/span&gt;22222/tcp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# ç§»é™¤é»˜è®¤çš„ ssh æœåŠ¡ï¼ˆå› ä¸ºå®ƒå¯¹åº” 22 ç«¯å£ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo firewall-cmd --permanent --remove-service&lt;span class="o"&gt;=&lt;/span&gt;ssh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# é‡è½½é…ç½®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo firewall-cmd --reload
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="æ€»ç»“"&gt;æ€»ç»“
&lt;/h2&gt;&lt;p&gt;ç»è¿‡è¿™ä¸€ç•ªæŠ˜è…¾ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;SSH ç«¯å£æ”¹äº†&lt;/strong&gt;ï¼Œæ‰«æè„šæœ¬æ‰¾ä¸åˆ°é—¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Root ç¦äº†&lt;/strong&gt;ï¼Œå¿…é¡»ç”¨æ™®é€šç”¨æˆ·ææƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯†ç ç™»ä¸ä¸Šäº†&lt;/strong&gt;ï¼Œå¿…é¡»æœ‰å¯†é’¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Fail2Ban å®ˆç€&lt;/strong&gt;ï¼Œè°æ•¢æš´åŠ›ç ´è§£ç›´æ¥å° IPã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å†æ¬¡å®¡è§†ç³»ç»Ÿæ—¥å¿—ï¼Œå¼‚å¸¸ç™»å½•å°è¯•å·²å¤§å¹…å‡å°‘ï¼Œæ—¥å¿—ç¯å¢ƒæ¢å¤äº†åº”æœ‰çš„æ¸…æœ—ã€‚&lt;/p&gt;
&lt;p&gt;ç½‘ç»œå®‰å…¨é¢†åŸŸä¸å­˜åœ¨ç»å¯¹çš„â€œé“œå¢™é“å£â€ï¼Œé˜²å¾¡çš„æ ¸å¿ƒç­–ç•¥åœ¨äºä¸æ–­æå‡æ”»å‡»è€…çš„æˆæœ¬ã€‚å¯¹äºä¸ªäººæœåŠ¡å™¨è€Œè¨€ï¼Œåˆ‡å®è½å®ä¸Šè¿°å®‰å…¨åŠ å›ºæªæ–½ï¼Œè¶³ä»¥æœ‰æ•ˆæŠµå¾¡ç»å¤§å¤šæ•°è‡ªåŠ¨åŒ–è„šæœ¬çš„æ¶æ„æ‰«æä¸æ”»å‡»ã€‚&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼ŒæœåŠ¡å™¨çš„åŸºç¡€å®‰å…¨é˜²çº¿å·²æ„å»ºå®Œæˆã€‚&lt;/p&gt;</description></item><item><title>å½’æ¡£</title><link>https://varcat.github.io/hugo_blog/zh-cn/archives/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0800</pubDate><guid>https://varcat.github.io/hugo_blog/zh-cn/archives/</guid><description/></item><item><title>ç®€å†</title><link>https://varcat.github.io/hugo_blog/zh-cn/resume/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0800</pubDate><guid>https://varcat.github.io/hugo_blog/zh-cn/resume/</guid><description/></item><item><title>CSSç€‘å¸ƒæµå¸ƒå±€</title><link>https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/</link><pubDate>Sun, 17 May 2020 23:45:00 +0800</pubDate><guid>https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/</guid><description>&lt;h2 id="ç€‘å¸ƒæµå¸ƒå±€æ˜¯ä»€ä¹ˆ"&gt;ç€‘å¸ƒæµå¸ƒå±€æ˜¯ä»€ä¹ˆ
&lt;/h2&gt;&lt;p&gt;ç€‘å¸ƒæµå¸ƒå±€æ˜¯ä¸€ç§å¸¸è§çš„ç½‘é¡µå¸ƒå±€æ–¹å¼ï¼Œè§†è§‰ä¸Šç»™äººä¸€ç§å‚å·®ä¸é½çš„å¤šæ çš„æ•ˆæœï¼Œå¸¸ç”¨äºå›¾ç‰‡ä¸ºä¸»çš„ç‰ˆå—ï¼Œå¦‚ä¸‹å›¾ã€‚&lt;/p&gt;
&lt;p&gt;ok~ ç°åœ¨æˆ‘æ¥è¯•ç€åšä¸€åš ğŸ§&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="ä»£ç å®ç°"&gt;ä»£ç å®ç°
&lt;/h2&gt;&lt;h3 id="åŸºæœ¬ä»£ç "&gt;åŸºæœ¬ä»£ç 
&lt;/h3&gt;&lt;p&gt;ç¯å¢ƒ Chrome 81.0.4044.138&lt;/p&gt;
&lt;p&gt;HTML&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-html" data-lang="html"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;main&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;main&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;CSS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;box-sizing&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;border-box&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;main&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;padding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;box-shadow&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt; &lt;span class="nb"&gt;rgba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.15&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;JavaScript&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç”¨äºç”Ÿæˆéšæœºé¢œè‰²
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;getRandomColor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="sb"&gt;`#&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;random&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;slice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç”¨äºç”Ÿæˆéšæœºé«˜åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;genRandomHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;random&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;px`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;mainEl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;main&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç”Ÿæˆ100ä¸ªdivï¼Œæ–¹ä¾¿æŸ¥çœ‹æ•ˆæœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;mainEl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerHTML&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Array&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;from&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="sb"&gt;`
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sb"&gt; &amp;lt;div class=&amp;#34;item&amp;#34; style=&amp;#34;background: &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;getRandomColor&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;; height: &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;genRandomHeight&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sb"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sb"&gt; &amp;lt;/div&amp;gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¥½äº†ï¼Œç°åœ¨æˆ‘å¾—åˆ°äº†ä¸‹é¢çš„ç”»é¢ï¼Œçœ‹èµ·æ¥ä¹Ÿåƒç€‘å¸ƒæµï¼Œå‚å·®ä¸é½ï¼Œé™¤äº†æ²¡æœ‰å¤šåˆ— ğŸ˜€&lt;/p&gt;
&lt;h3 id="columns-å®ç°"&gt;columns å®ç°
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬è¿˜ç¼ºå°‘ä¸€ä¸ªå¤šåˆ—ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ° css çš„å¤šåˆ—å¸ƒå±€ columnsï¼Œé‚£ä¹ˆäº‹æƒ…å°±ç®€å•èµ·æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ css æ–‡ä»¶ï¼Œmain å…ƒç´ é‡ŒåŠ ä¸Šä¸€å¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;main&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;emmm~ å¥½åƒå¾ˆå®¹æ˜“å°±å®ç°äº†ï¼Œä¸è¿‡ç­‰ç­‰ï¼Œ32ã€39ã€58ã€66ã€84ã€92 è¿™å‡ ä¸ª div å¥½åƒè¢«è…°æ–©äº†ï¼Œè€Œä¸”å…ƒç´ çš„æ’åºæ˜¯ä»ä¸Šå¾€ä¸‹ï¼Œè€Œä¸æ˜¯äººä»¬ç†Ÿæ‚‰çš„ä»å·¦åˆ°å³ ğŸ¤”&lt;/p&gt;
&lt;p&gt;&lt;img src="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/image.png"
width="842"
height="814"
srcset="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/image_hu_ad3ce96d91cd779b.png 480w, https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/image_hu_b1a59ffd7d1ebd5a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="103"
data-flex-basis="248px"
&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹ &lt;a class="link" href="https://www.w3.org/TR/css-multicol-1/" target="_blank" rel="noopener"
&gt;CSS Multi-column Layout Module Level 1&lt;/a&gt; è§„èŒƒåï¼Œå¤šåˆ—å¸ƒå±€ä¼šä¸ºå­å…ƒç´ çš„å†…å®¹ç”Ÿæˆ &lt;code&gt;anonymous fragmentation containers&lt;/code&gt; åŒ¿åç›’å­ï¼Œæº¢å‡ºçš„å†…å®¹ä¼šè¢«åˆ†æ®µï¼Œæ¢åˆ—æ˜¾ç¤ºï¼Œæƒ³è¦æ§åˆ¶åˆ†æ®µï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;break-inside: avoid&lt;/code&gt;ï¼ˆå‚è€ƒ &lt;a class="link" href="https://www.w3.org/TR/css-break-3/#column-break-values" target="_blank" rel="noopener"
&gt;column-break-values&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;css æ–‡ä»¶ä¸­åŠ å…¥è¿™ä¸€å¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;break-inside&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;avoid&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/image2.png"
width="851"
height="840"
srcset="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/image2_hu_29215823c2b061a5.png 480w, https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/image2_hu_33504c67f1374297.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="101"
data-flex-basis="243px"
&gt;&lt;/p&gt;
&lt;p&gt;è€ƒè™‘åˆ°æµè§ˆå™¨å¯¹ &lt;code&gt;break-inside&lt;/code&gt; çš„æ”¯æŒä¸å¤ªå¥½ï¼Œå¯ä»¥è¯•ç”¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;item&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;inline-block&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="kt"&gt;%&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/3.png"
width="849"
height="833"
srcset="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/3_hu_9bb53e3863f68f9a.png 480w, https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/3_hu_3c4e2bbc473e6fc5.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="101"
data-flex-basis="244px"
&gt;&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹å°±æ˜¯ä¼šå‡ºç°ç™½è‰²é—´éš™ã€‚&lt;/p&gt;
&lt;h3 id="grid-å®ç°"&gt;grid å®ç°
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ columns å®ç°ç€‘å¸ƒæµå¸ƒå±€ï¼Œä¸€å¤§ç¼ºç‚¹æ˜¯ä¸æ–¹ä¾¿æ”¹å˜å­å…ƒç´ çš„é¡ºåºä»å·¦å¾€å³ï¼Œè¿™æ—¶å¯ä»¥è¯•ç”¨ grid æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;åŸºæœ¬ä»£ç ä¸å˜&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;span class="lnt"&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;main&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="k"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt;å»æ‰è¿™ä¸ªå›ºå®šå®½åº¦ï¼Œè¿™é‡Œå¯ä»¥ä¸ä½¿ç”¨ï¼Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;grid&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;auto-fillå°½å¯èƒ½çš„å¡«å……åˆ—ï¼Œåˆ—çš„æœ€å°å®½åº¦åº”ä¸º40pxï¼Œæœ€å¤§1frï¼Œçµæ´»çš„è°ƒæ•´ï¼Œè®©æ¯åˆ—å®½åº¦ç›¸åŒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;grid-template-columns&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nf"&gt;repeat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kc"&gt;fill&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nf"&gt;minmax&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;fr&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;grid-auto-rows&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;grid-gap&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/4.png"
width="800"
height="525"
srcset="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/4_hu_d628213d2d3e0dc0.png 480w, https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/4_hu_7a393cf1577d5572.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="365px"
&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘æœ‰äº†ä¸€ä¸ªç®€å•çš„&lt;code&gt;grid&lt;/code&gt;å¸ƒå±€ï¼Œå®ƒä¿æŒäº†ç»™å®šçš„é¡ºåºï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æ ¹æ®æµè§ˆå™¨å®½åº¦è°ƒæ•´åˆ—æ•°ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå‘ç°äº†å‡ ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¡Œé«˜å›ºå®šï¼Œæ‰€æœ‰æœ‰æº¢å‡ºçš„&lt;code&gt;div&lt;/code&gt;ï¼ŒåŒæ—¶æœ‰äº›&lt;code&gt;div&lt;/code&gt;é«˜åº¦ä¸åˆ°è¡Œé«˜ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸‘é™‹çš„ç™½è‰²é—´éš™ï¼Œå½“ä¸‹&lt;code&gt;grid&lt;/code&gt;å¸ƒå±€æ˜¯ä¸ä¼šè®©å­å…ƒç´ è‡ªåŠ¨è·¨è¶Šè¡Œï¼Œæ‰€ä»¥è¦äººå·¥å¹²é¢„ï¼Œæˆ‘éœ€è¦è°ƒæ•´æ¯ä¸€ä¸ª&lt;code&gt;div&lt;/code&gt;ï¼Œè®©ä»–ä»¬è·¨è¶Šä¸åŒçš„è¡Œæ•°ï¼Œæ¯”å¦‚ &lt;code&gt;grid-row-end: span 2;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦ä½¿ç”¨ js æ¥åŠ¨æ€è®¾ç½®æ¯ä¸ª div æ‰€è·¨è¶Šçš„è¡Œæ•°ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// è·å–è¡Œé«˜ä¸é—´è·ï¼Œç›®å‰è¡Œé«˜æ˜¯40pxï¼Œé—´è·æ˜¯5px
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;rowHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;parseInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;getComputedStyle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mainEl&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;getPropertyValue&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;grid-auto-rows&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;rowGap&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;parseInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;getComputedStyle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mainEl&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;getPropertyValue&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;grid-row-gap&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;setSpan&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;el&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// è®¡ç®—divéœ€è¦è·¨è¶Šçš„è¡Œæ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;style&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;gridRowEnd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sb"&gt;`span &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;el&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;clientHeight&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;rowGap&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;rowHeight&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;rowGap&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelectorAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;.item&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;forEach&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;setSpan&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/5.png"
width="1419"
height="517"
srcset="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/5_hu_3fe60a87088509bb.png 480w, https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/5_hu_3a69f1a03f28e0b6.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="274"
data-flex-basis="658px"
&gt;&lt;/p&gt;
&lt;p&gt;å¾ˆå¥½ï¼Œæˆ‘ä»¬è®¡ç®—å‡ºäº†&lt;code&gt;div&lt;/code&gt;èƒ½å®Œå…¨æ˜¾ç¤ºçš„æœ€å°è¡Œæ•°ï¼Œä½†è¿˜æœ‰æœ‰å¾ˆå¤šé—´éš™ï¼Œå› ä¸ºæˆ‘ä»¬çš„è¡Œé«˜è®¾ç½®çš„&lt;code&gt;40px&lt;/code&gt;ï¼Œè®¡ç®—ä¸ç²¾ç¡®ï¼Œæ‰€ä»¥æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯å°†è¡Œé«˜è®¾ç½®ä¸ºè¾ƒå°çš„æ•°ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;main&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;åŸæ¥æ˜¯40pxï¼Œç°åœ¨æ”¹ä¸º1px&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;grid-auto-rows&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/6.png"
width="778"
height="894"
srcset="https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/6_hu_bcf71439e14236d3.png 480w, https://varcat.github.io/hugo_blog/zh-cn/p/css-waterfall-flow/6_hu_35bd0bf83e10645b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="87"
data-flex-basis="208px"
&gt;&lt;/p&gt;
&lt;p&gt;ğŸ‰ğŸ‰çœ‹èµ·æ¥ä¸é”™ï½&lt;/p&gt;</description></item><item><title>Links</title><link>https://varcat.github.io/hugo_blog/zh-cn/links/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://varcat.github.io/hugo_blog/zh-cn/links/</guid><description/></item><item><title>æœç´¢</title><link>https://varcat.github.io/hugo_blog/zh-cn/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://varcat.github.io/hugo_blog/zh-cn/search/</guid><description/></item></channel></rss>